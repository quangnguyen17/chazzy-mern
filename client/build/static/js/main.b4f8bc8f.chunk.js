(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,A){},140:function(e,A,a){"use strict";a.r(A);var t=a(0),n=a.n(t),l=a(14),r=a.n(l),c=(a(84),a(18)),s=a(23),m=a(27),o=a(6),i=a(16),u=a.n(i),d=a(142),g=a(143),h=a(147),p=a(144),E=function(){var e=Object(t.useState)({username:"",password:""}),A=Object(o.a)(e,2),a=A[0],l=A[1],r=Object(t.useState)({firstName:"",lastName:"",username:"",password:"",confirmPassword:""}),i=Object(o.a)(r,2),E=i[0],b=i[1],f=Object(t.useState)([]),N=Object(o.a)(f,2),w=N[0],y=N[1],v=Object(t.useState)(!1),O=Object(o.a)(v,2),x=O[0],j=O[1],C=function(){return j(!1)},k=function(){return j(!0)};Object(t.useEffect)((function(){u.a.get("http://localhost:8000/api/users",{withCredentials:!0}).then((function(e){null!==e.data.loggedInUser&&Object(c.b)("/")})).catch((function(e){}))}),[]);var S=function(e){return l(Object(m.a)({},a,Object(s.a)({},e.target.name,e.target.value)))},_=function(e){return b(Object(m.a)({},E,Object(s.a)({},e.target.name,e.target.value)))};return n.a.createElement(d.a,{className:"m-0 p-0"},n.a.createElement(g.a,{className:"p-5 heightFull align-items-center tracking-in-expand-fwd",md:4},n.a.createElement("div",{className:"w-100 mb-5"},n.a.createElement("h1",{className:"font-weight-bold display-3 m-0"},"Chazzy."),n.a.createElement("p",{className:"text-secondary"},"A timed messaging app."),n.a.createElement("form",{className:"my-5",onSubmit:function(e){e.preventDefault(),u.a.post("http://localhost:8000/api/users/login",a,{withCredentials:!0}).catch((function(e){return console.log(e)})).then((function(e){var A=e.data.msg;void 0!==A&&A.length>0?"success"===A?Object(c.b)("/dashboard"):(y([A]),k()):(y(["Oops! Something went wrong. Please try again! :)"]),k())}))}},n.a.createElement("input",{onChange:S,className:"form-control bg-light p-4 border-0",name:"username",placeholder:"Username",type:"text",required:!0}),n.a.createElement("input",{onChange:S,className:"form-control mt-2 bg-light p-4 border-0",name:"password",placeholder:"Password",type:"password",required:!0}),n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"btn btn-dark mt-5 px-4 py-2",type:"submit"},"Sign In"),n.a.createElement(h.a,{show:x,onHide:C,className:"no-border",centered:!0},n.a.createElement(h.a.Header,{closeButton:!0,className:"no-border"},n.a.createElement(h.a.Title,{className:"font-weight-bold"},"Ooops! Something went wrong. :(")),n.a.createElement(h.a.Body,{className:"border-none"},n.a.createElement("ul",{className:"list-inline text-danger"},w.length>0?w.map((function(e,A){return n.a.createElement("li",{key:A},"- ",e)})):n.a.createElement(n.a.Fragment,null))),n.a.createElement(h.a.Footer,{className:"no-border"},n.a.createElement(p.a,{variant:"light",onClick:C},"Got It!"))))))),n.a.createElement(g.a,{className:"p-5 m-0 heightFull align-items-center tracking-in-contract",md:8},n.a.createElement("div",{className:"w-100 mb-5 text-center"},n.a.createElement("h1",{className:"font-weight-bold m-0"},"Let's get started!"),n.a.createElement("p",{className:"text-secondary"},"Don't have an account? Sign Up."),n.a.createElement("form",{className:"my-5",onSubmit:function(e){e.preventDefault(),u.a.post("http://localhost:8000/api/users/register",E,{withCredentials:!0}).catch((function(e){return console.log(e)})).then((function(e){if("msg"in e.data)"success"===e.data.msg&&Object(c.b)("/dashboard");else if(e.data.errors){var A=Object.values(e.data.errors).map((function(e){return e.message}));A.push(e.data.name),y(A),k()}}))}},n.a.createElement(d.a,{className:"m-0 p-0"},n.a.createElement(g.a,{className:"m-0 p-0 mr-1"},n.a.createElement("input",{onChange:_,className:"form-control bg-light m-0 p-4 border-0",name:"firstName",placeholder:"First Name",type:"text",required:!0})),n.a.createElement(g.a,{className:"m-0 p-0 ml-1"},n.a.createElement("input",{onChange:_,className:"form-control bg-light m-0 p-4 border-0",name:"lastName",placeholder:"Last Name",type:"text",required:!0}))),n.a.createElement("input",{onChange:_,className:"form-control bg-light my-2 p-4 border-0",name:"username",placeholder:"Username",type:"text",required:!0}),n.a.createElement("input",{onChange:_,className:"form-control bg-light mt-2 p-4 border-0",name:"password",placeholder:"Password",type:"password",required:!0}),n.a.createElement("input",{onChange:_,className:"form-control bg-light mt-2 p-4 border-0",name:"confirmPassword",placeholder:"Confirm Password",type:"password",required:!0}),n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"btn btn-secondary mt-5 px-4 py-2",type:"submit"},"Sign Up"),n.a.createElement(h.a,{show:x,onHide:C,className:"no-border",centered:!0},n.a.createElement(h.a.Header,{closeButton:!0,className:"no-border"},n.a.createElement(h.a.Title,{className:"font-weight-bold"},"Ooops! Something went wrong. :(")),n.a.createElement(h.a.Body,{className:"border-none"},n.a.createElement("ul",{className:"list-inline text-danger"},w.map((function(e,A){return n.a.createElement("li",{key:A},"- ",e)})))),n.a.createElement(h.a.Footer,{className:"no-border"},n.a.createElement(p.a,{variant:"light",onClick:C},"Got It!"))))))),n.a.createElement("p",{className:"copyright-label m-0 text-secondary"},"\u24b8QuangNguyen 2020 - ",n.a.createElement("a",{href:"/",className:"text-secondary"},"View Repo!")))},b=Object(t.createContext)(null),f=a(38),N=a.n(f),w=a(29),y=a.n(w),v=a(145),O=function(e){var A=e.user,a=e.onClick,t=e.showDetails;return n.a.createElement("ul",{className:"list-inline m-0 p-0"},t?n.a.createElement(n.a.Fragment,null):n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"list-inline-item align-middle m-0 p-0"},n.a.createElement("button",{style:{background:"none",border:"0px solid white",outlineStyle:"none"},onClick:a},n.a.createElement("img",{width:"87.5",height:"87.5",className:"rounded-circle",src:y.a,alt:""}),n.a.createElement("br",null),n.a.createElement("p",{className:"mt-2"},"@",A?A.username:"username")))),n.a.createElement("li",{className:"list-inline-item align-middle m-0 p-0"},t?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{width:"100",height:"100",className:"rounded-circle d-inline-block align-middle",src:y.a,alt:""}),n.a.createElement("div",{className:"px-3 text-left d-inline-block align-middle"},n.a.createElement("h4",{className:"mb-2 font-weight-bold"},A.firstName+" "+A.lastName),n.a.createElement("h5",{className:"m-0"},n.a.createElement(v.a,{variant:"secondary"},"@",A.username)))):n.a.createElement(n.a.Fragment,null)))},x=a(146),j=a(150),C=function(e){var A=e.userWhomAmChattingWith,a=e.passedInMessages,l=Object(t.useContext)(b).loggedInUser,r=Object(t.useState)((function(){return N()(":8000")})),c=Object(o.a)(r,1)[0],s=Object(t.useState)(""),m=Object(o.a)(s,2),i=m[0],d=m[1],g=Object(t.useRef)();Object(t.useEffect)((function(){}),[]);var h=function(e){return e.senderID===l._id};return n.a.createElement(n.a.Fragment,null,n.a.createElement("ul",{className:"list-inline text-center mx-1 pb-2"},n.a.createElement("li",{style:{borderRadius:"16px"},className:"bg-light mb-3 py-3 bo"},n.a.createElement(O,{user:A,showDetails:1})),a?a.map((function(e){return n.a.createElement("li",{key:e._id,className:h(e)?"text-right":"text-left"},n.a.createElement("p",{className:"mx-2"},h(e)?e.message:n.a.createElement(n.a.Fragment,null),n.a.createElement("span",{className:"p-2 rounded ".concat(h(e)?"ml-2 bg-secondary text-light":"mr-2 bg-light")},"@",h(e)?"me":A.username),h(e)?n.a.createElement(n.a.Fragment,null):e.message))})):n.a.createElement(n.a.Fragment,null)),n.a.createElement("div",{className:"sticky"},n.a.createElement("form",{className:"w-75 mx-auto",onSubmit:function(e){e.preventDefault();var a={message:i,senderID:l._id,receiverID:A._id};u.a.post("http://localhost:8000/api/messages/send",a,{withCredentials:!0}).then((function(e){g.current.value="",c.emit("new-message",e.data)})).catch((function(e){}))}},n.a.createElement(x.a,null,n.a.createElement(j.a,{ref:g,onChange:function(e){return d(e.target.value)},type:"text",className:"form-control bg-light p-4 border-0",placeholder:"Enter your message here..."}),n.a.createElement(x.a.Append,null,i.length>0?n.a.createElement(p.a,{variant:"dark",type:"submit",className:"px-5",value:"Send"},"Send"):n.a.createElement(p.a,{variant:"dark",type:"submit",className:"px-5",value:"Send",disabled:!0},"Send"),i.length>0?n.a.createElement(p.a,{variant:"success",className:"px-5"},"Now"):n.a.createElement(p.a,{variant:"success",className:"px-5",disabled:!0},"Now"))))))},k=a(149),S=a(148),_=a(30),D=a.n(_),I=(a(73),function(){var e=Object(t.useState)((function(){return N()(":8000")})),A=Object(o.a)(e,1)[0],l=Object(t.useState)(null),r=Object(o.a)(l,2),i=r[0],h=r[1],p=Object(t.useState)(null),E=Object(o.a)(p,2),f=E[0],w=E[1],x=Object(t.useState)(null),j=Object(o.a)(x,2),_=j[0],I=j[1],F=Object(t.useState)([]),Q=Object(o.a)(F,2),B=Q[0],U=Q[1],H=Object(t.useState)({}),P=Object(o.a)(H,2),R=P[0],L=P[1];Object(t.useEffect)((function(){u.a.get("http://localhost:8000/api/users",{withCredentials:!0}).then((function(e){I(e.data.loggedInUser),U(e.data.otherUsers),L(e.data.groupedMessages)})).catch((function(e){return Object(c.b)("/welcome")}))}),[]),Object(t.useEffect)((function(){A.on("received-newMessage",(function(e){if(_){var A=e.message;A.senderID!==_._id&&A.receiverID!==_._id||w(A)}}))}),[_]),Object(t.useEffect)((function(){if(f){var e=f.senderID===_._id?f.receiverID:f.senderID,A=R.hasOwnProperty(e)?R[e].concat([f]):[f];L(Object(m.a)({},R,Object(s.a)({},e,A))),w(null)}}),[f]);var M=function(e){return B.filter((function(A){return A._id===e}))[0]};return n.a.createElement("div",{className:"".concat(D.a.dashboard)},n.a.createElement(k.a,{style:{backgroundColor:"white",zIndex:"5"},className:"px-5",expand:"md"},n.a.createElement("h3",{className:"p-0 m-0 font-weight-bold"},"Chazzy."),n.a.createElement(k.a.Toggle,{"aria-controls":"nav-collapse"}),n.a.createElement(k.a.Collapse,{id:"nav-collapse"},n.a.createElement(S.a,null,n.a.createElement("h5",{className:"nav-link align-middle m-0 ml-3",href:"#"},_?n.a.createElement(v.a,{className:"p-2",variant:"dark"},"@",_.username):n.a.createElement(n.a.Fragment,null))),n.a.createElement(S.a,{className:"ml-auto m-0 p-0"},n.a.createElement(S.a.Link,{onClick:function(){Object(c.b)("/"),u.a.get("http://localhost:8000/api/users/logout",{withCredentials:!0}).then((function(e){})).catch((function(e){}))},href:"#"},"Log Out.")))),n.a.createElement("div",{className:"".concat(D.a.rowHeight," container-fluid m-0 p-0 w-100")},n.a.createElement(d.a,{className:"h-100 w-100 p-0 m-0"},n.a.createElement(g.a,{style:{backgroundColor:"rgb(249, 249, 249)"},className:"h-100 w-100 overflow-auto ".concat(D.a.left),md:5},n.a.createElement("ul",{className:"list-inline w-100 text-left pt-4 m-0",style:{overflowX:"scroll"}},n.a.createElement("li",{className:"ml-3 mb-3 font-weight-bold"},"Just Random...!"),B.map((function(e){return n.a.createElement("li",{key:e._id,className:"list-inline-item mx-2"},n.a.createElement(O,{onClick:function(){return h(e)},user:e}))}))),n.a.createElement("ul",{className:"list-inline w-100 px-3 py-4 m-0"},n.a.createElement("li",null,n.a.createElement("h5",{className:"mx-auto mb-4"},"Hi ",_?_.firstName:"","! You have (",Object.keys(R).length,") conversations.")),n.a.createElement("li",{className:"w-100 text-left"},n.a.createElement("ul",{className:"list-inline"},n.a.createElement("li",null,Object.entries(R).map((function(e,A){return n.a.createElement("ul",{onClick:function(){return h(M(e[0]))},key:A,className:"btn text-left w-100 px-0 list-inline"},n.a.createElement("li",{className:"list-inline-item align-middle"},n.a.createElement("img",{width:"75",height:"75",className:"rounded-circle",src:y.a,alt:""}),n.a.createElement("br",null)),n.a.createElement("li",{className:"list-inline-item align-middle ml-2"},n.a.createElement("h6",{className:"m-0 font-weight-bold"},"@",M(e[0]).username),n.a.createElement("small",{className:"m-0 text-secondary"},e[1][e[1].length-1].senderID!==_._id?"".concat(M(e[0]).firstName," sent you a message"):e[1][e[1].length-1].message)),n.a.createElement("li",{className:"list-inline-item align-middle float-right text-right py-3"},n.a.createElement("p",{className:"m-0 text-secondary"},n.a.createElement("small",null,function(e){var A=new Date(e);return a(135)(A).fromNow()}(e[1][e[1].length-1].createdAt)," ::")),n.a.createElement("h5",{className:"m-0 text-secondary"},n.a.createElement(v.a,{variant:"secondary"},e[1][e[1].length-1].senderID===_._id?"Sent!":"Received!"))))}))))))),n.a.createElement(g.a,{style:{backgroundColor:"rgb(252, 252, 252)"},className:"p-3 h-100 ".concat(D.a.right),md:7},n.a.createElement(b.Provider,{value:{loggedInUser:_}},i?n.a.createElement(C,{userWhomAmChattingWith:i,passedInMessages:R[i._id]}):n.a.createElement(n.a.Fragment,null))))))}),F=(a(139),function(){return n.a.createElement("div",{className:"App container-fluid p-0"},n.a.createElement(c.a,null,n.a.createElement(I,{path:"/dashboard"}),n.a.createElement(I,{path:"/"}),n.a.createElement(E,{path:"/welcome"})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},29:function(e,A){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk//wAALCAGQAZABAREA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAWEAEBAQAAAAAAAAAAAAAAAAAAQTH/2gAIAQEAAD8AtwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/9k="},30:function(e,A,a){e.exports={rowHeight:"Dashboard_rowHeight__3ECJN",messageInput:"Dashboard_messageInput__QppB-",dashboard:"Dashboard_dashboard__3jFau",left:"Dashboard_left__2SRKK",right:"Dashboard_right__2dPty"}},73:function(e,A,a){},79:function(e,A,a){e.exports=a(140)},84:function(e,A,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.b4f8bc8f.chunk.js.map