{"ast":null,"code":"import _slicedToArray from\"/Users/quangnguyen/Desktop/Projects/Chazzy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect,useRef}from'react';import Context from'../Context';import io from'socket.io-client';import axios from'axios';import UserProfilePreview from'./UserProfilePreview';import{InputGroup,FormControl,Button}from'react-bootstrap';var ChatArea=function ChatArea(_ref){var userWhomAmChattingWith=_ref.userWhomAmChattingWith,passedInMessages=_ref.passedInMessages;// useContext\nvar _useContext=useContext(Context),loggedInUser=_useContext.loggedInUser;// useState\nvar _useState=useState(function(){return io(':8000');}),_useState2=_slicedToArray(_useState,1),socket=_useState2[0];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),messageText=_useState4[0],setMessageText=_useState4[1];// useRef\nvar messageInputRef=useRef();// useEffect\nuseEffect(function(){// document.body.scrollTop(100);\n},[]);var formOnSubmit=function formOnSubmit(event){event.preventDefault();var newMessage={message:messageText,senderID:loggedInUser._id,receiverID:userWhomAmChattingWith._id};axios.post('http://localhost:8000/api/messages/send',newMessage,{withCredentials:true}).then(function(res){messageInputRef.current.value='';socket.emit('new-message',res.data);}).catch(function(err){/* TODO: Do something with err */});};var isMyMessage=function isMyMessage(message){return message.senderID===loggedInUser._id;};return React.createElement(React.Fragment,null,React.createElement(\"ul\",{className:\"list-inline text-center mx-1 pb-2\"},React.createElement(\"li\",{style:{borderRadius:'16px'},className:\"bg-light mb-3 py-3 bo\"},React.createElement(UserProfilePreview,{user:userWhomAmChattingWith,showDetails:1})),passedInMessages?passedInMessages.map(function(message){return React.createElement(\"li\",{key:message._id,className:isMyMessage(message)?'text-right':'text-left'},React.createElement(\"p\",{className:\"mx-2\"},isMyMessage(message)?message.message:React.createElement(React.Fragment,null),React.createElement(\"span\",{className:\"p-2 rounded \".concat(isMyMessage(message)?'ml-2 bg-secondary text-light':'mr-2 bg-light')},\"@\",isMyMessage(message)?'me':userWhomAmChattingWith.username),isMyMessage(message)?React.createElement(React.Fragment,null):message.message));}):React.createElement(React.Fragment,null)),React.createElement(\"div\",{className:\"sticky\"},React.createElement(\"form\",{className:\"w-75 mx-auto\",onSubmit:formOnSubmit},React.createElement(InputGroup,null,React.createElement(FormControl,{ref:messageInputRef,onChange:function onChange(event){return setMessageText(event.target.value);},type:\"text\",className:\"form-control bg-light p-4 border-0\",placeholder:\"Enter your message here...\"}),React.createElement(InputGroup.Append,null,messageText.length>0?React.createElement(Button,{variant:\"dark\",type:\"submit\",className:\"px-5\",value:\"Send\"},\"Send\"):React.createElement(Button,{variant:\"dark\",type:\"submit\",className:\"px-5\",value:\"Send\",disabled:true},\"Send\"),messageText.length>0?React.createElement(Button,{variant:\"success\",className:\"px-5\"},\"Now\"):React.createElement(Button,{variant:\"success\",className:\"px-5\",disabled:true},\"Now\"))))));};export default ChatArea;","map":{"version":3,"sources":["/Users/quangnguyen/Desktop/Projects/Chazzy/client/src/components/ChatArea.js"],"names":["React","useContext","useState","useEffect","useRef","Context","io","axios","UserProfilePreview","InputGroup","FormControl","Button","ChatArea","userWhomAmChattingWith","passedInMessages","loggedInUser","socket","messageText","setMessageText","messageInputRef","formOnSubmit","event","preventDefault","newMessage","message","senderID","_id","receiverID","post","withCredentials","then","res","current","value","emit","data","catch","err","isMyMessage","borderRadius","map","username","target","length"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from 'react';\nimport Context from '../Context';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport UserProfilePreview from './UserProfilePreview';\nimport { InputGroup, FormControl, Button } from 'react-bootstrap';\n\nconst ChatArea = ({ userWhomAmChattingWith, passedInMessages }) => {\n    // useContext\n    const { loggedInUser } = useContext(Context);\n    // useState\n    const [socket] = useState(() => io(':8000'));\n    const [messageText, setMessageText] = useState('');\n    // useRef\n    const messageInputRef = useRef();\n\n    // useEffect\n    useEffect(() => {\n        // document.body.scrollTop(100);\n    }, []);\n\n    const formOnSubmit = event => {\n        event.preventDefault();\n        const newMessage = { message: messageText, senderID: loggedInUser._id, receiverID: userWhomAmChattingWith._id };\n        axios.post('http://localhost:8000/api/messages/send', newMessage, { withCredentials: true })\n            .then(res => {\n                messageInputRef.current.value = '';\n                socket.emit('new-message', res.data);\n            })\n            .catch(err => { /* TODO: Do something with err */ });\n    }\n\n    const isMyMessage = message => message.senderID === loggedInUser._id;\n\n    return (\n        <>\n            <ul className=\"list-inline text-center mx-1 pb-2\">\n                <li style={{ borderRadius: '16px' }} className=\"bg-light mb-3 py-3 bo\">\n                    <UserProfilePreview user={userWhomAmChattingWith} showDetails={1} />\n                </li>\n                {passedInMessages ? passedInMessages.map(message => (\n                    <li key={message._id} className={isMyMessage(message) ? 'text-right' : 'text-left'}>\n                        <p className=\"mx-2\">\n                            {isMyMessage(message) ? message.message : <></>}\n                            <span className={`p-2 rounded ${isMyMessage(message) ? 'ml-2 bg-secondary text-light' : 'mr-2 bg-light'}`}>@{isMyMessage(message) ? 'me' : userWhomAmChattingWith.username}</span>\n                            {isMyMessage(message) ? <></> : message.message}\n                        </p>\n                    </li>\n                )) : <></>}\n            </ul>\n            <div className=\"sticky\">\n                <form className=\"w-75 mx-auto\" onSubmit={formOnSubmit}>\n                    <InputGroup>\n                        <FormControl ref={messageInputRef} onChange={event => setMessageText(event.target.value)} type=\"text\" className=\"form-control bg-light p-4 border-0\" placeholder=\"Enter your message here...\" />\n                        <InputGroup.Append>\n                            {messageText.length > 0 ? <Button variant=\"dark\" type=\"submit\" className=\"px-5\" value=\"Send\">Send</Button> : <Button variant=\"dark\" type=\"submit\" className=\"px-5\" value=\"Send\" disabled>Send</Button>}\n                            {messageText.length > 0 ? <Button variant=\"success\" className=\"px-5\">Now</Button> : <Button variant=\"success\" className=\"px-5\" disabled>Now</Button>}\n                        </InputGroup.Append>\n                    </InputGroup>\n                </form>\n            </div>\n        </>\n    );\n}\n\nexport default ChatArea;"]},"metadata":{},"sourceType":"module"}