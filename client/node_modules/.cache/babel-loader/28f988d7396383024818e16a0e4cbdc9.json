{"ast":null,"code":"var _jsxFileName = \"/Users/quangnguyen/Desktop/Projects/Chazzy/client/src/components/LoginRes.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { navigate } from '@reach/router';\nimport { Row, Col, Modal, Button } from 'react-bootstrap';\n\nconst LoginRes = () => {\n  const [login, setLogin] = useState({\n    username: '',\n    password: ''\n  });\n  const [register, setRegister] = useState({\n    firstName: '',\n    lastName: '',\n    username: '',\n    password: '',\n    confirmPassword: ''\n  }); // const [profileImage, setProfileImage] = useState(null);\n\n  const [errors, setErrors] = useState([]);\n  const [showErrors, setShowErrors] = useState(false);\n\n  const handleClose = () => setShowErrors(false);\n\n  const handleShow = () => setShowErrors(true);\n\n  useEffect(() => {\n    // Check if already logged in.\n    axios.get('http://localhost:8000/api/users', {\n      withCredentials: true\n    }).then(res => {\n      if (res.data.loggedInUser !== null) {\n        navigate('/');\n      }\n    }).catch(err => console.log(err));\n  }, []);\n\n  const handleLogin = event => {\n    event.preventDefault();\n    axios.post('http://localhost:8000/api/users/login', login, {\n      withCredentials: true\n    }).catch(err => console.log(err)).then(res => {\n      const message = res.data.msg;\n\n      if (message !== undefined && message.length > 0) {\n        if (message === 'success') {\n          navigate('/dashboard');\n        } else {\n          setErrors([message]);\n          handleShow();\n        }\n      } else {\n        setErrors(['Oops! Something went wrong. Please try again! :)']);\n        handleShow();\n      }\n    });\n  };\n\n  const handleRegister = event => {\n    event.preventDefault();\n    axios.post('http://localhost:8000/api/users/register', register, {\n      withCredentials: true\n    }).catch(err => console.log(err)).then(res => {\n      if ('msg' in res.data) {\n        if (res.data['msg'] === 'success') {\n          navigate('/dashboard');\n        }\n      } else {\n        if (res.data.errors) {\n          let messages = Object.values(res.data.errors).map(val => val.message);\n          messages.push(res.data.name);\n          setErrors(messages);\n          handleShow();\n        }\n      }\n    });\n  }; // const profileImageOnSelect = event => {\n  //     const file = event.target.files[0];\n  //     if (file !== null) {\n  //         setProfileImage(file);\n  //     }\n  // }\n\n\n  const loginFieldOnChange = event => setLogin({ ...login,\n    [event.target.name]: event.target.value\n  });\n\n  const registerFieldOnChange = event => setRegister({ ...register,\n    [event.target.name]: event.target.value\n  });\n\n  return React.createElement(Row, {\n    className: \"m-0 p-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Col, {\n    className: \"p-5 heightFull align-items-center tracking-in-expand-fwd\",\n    md: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"w-75 mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"font-weight-bold display-3 m-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Chazzy.\"), React.createElement(\"p\", {\n    className: \"text-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"A timed messaging app.\"), React.createElement(\"form\", {\n    className: \"my-5\",\n    onSubmit: handleLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: loginFieldOnChange,\n    className: \"form-control bg-light p-4 border-0\",\n    name: \"username\",\n    placeholder: \"Username\",\n    type: \"text\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    onChange: loginFieldOnChange,\n    className: \"form-control mt-2 bg-light p-4 border-0\",\n    name: \"password\",\n    placeholder: \"Password\",\n    type: \"password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    className: \"btn btn-dark btn-action mt-5 px-4 py-2\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Sign In\"), React.createElement(Modal, {\n    show: showErrors,\n    onHide: handleClose,\n    className: \"no-border\",\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    className: \"no-border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    className: \"font-weight-bold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Ooops! Something went wrong. :(\")), React.createElement(Modal.Body, {\n    className: \"border-none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"list-inline text-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, errors.length > 0 ? errors.map((err, idx) => React.createElement(\"li\", {\n    key: idx,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"- \", err)) : React.createElement(React.Fragment, null))), React.createElement(Modal.Footer, {\n    className: \"no-border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"light\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Got It!\"))))))), React.createElement(Col, {\n    className: \"p-5 m-0 heightFull align-items-center tracking-in-contract\",\n    md: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"w-75 mb-5 text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"font-weight-bold m-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Register\"), React.createElement(\"p\", {\n    className: \"text-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Don't have an account? Sign Up.\"), React.createElement(\"form\", {\n    className: \"my-5\",\n    onSubmit: handleRegister,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"m-0 p-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(Col, {\n    className: \"m-0 p-0 mr-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: registerFieldOnChange,\n    className: \"form-control bg-light m-0 p-4 border-0\",\n    name: \"firstName\",\n    placeholder: \"First Name\",\n    type: \"text\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  })), React.createElement(Col, {\n    className: \"m-0 p-0 ml-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: registerFieldOnChange,\n    className: \"form-control bg-light m-0 p-4 border-0\",\n    name: \"lastName\",\n    placeholder: \"Last Name\",\n    type: \"text\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }))), React.createElement(\"input\", {\n    onChange: registerFieldOnChange,\n    className: \"form-control bg-light my-2 p-4 border-0\",\n    name: \"username\",\n    placeholder: \"Username\",\n    type: \"text\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    onChange: registerFieldOnChange,\n    className: \"form-control bg-light mt-2 p-4 border-0\",\n    name: \"password\",\n    placeholder: \"Password\",\n    type: \"password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    onChange: registerFieldOnChange,\n    className: \"form-control bg-light mt-2 p-4 border-0\",\n    name: \"confirmPassword\",\n    placeholder: \"Confirm Password\",\n    type: \"password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    className: \"btn btn-secondary mt-5 px-4 py-2\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Sign Up\"), React.createElement(Modal, {\n    show: showErrors,\n    onHide: handleClose,\n    className: \"no-border\",\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    className: \"no-border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    className: \"font-weight-bold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"Ooops! Something went wrong. :(\")), React.createElement(Modal.Body, {\n    className: \"border-none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"list-inline text-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, errors.map((err, idx) => React.createElement(\"li\", {\n    key: idx,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"- \", err)))), React.createElement(Modal.Footer, {\n    className: \"no-border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"light\",\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Got It!\"))))))), React.createElement(\"p\", {\n    className: \"copyright-label m-0 text-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"\\u24B8QuangNguyen 2020 - \", React.createElement(\"a\", {\n    href: \"#\",\n    className: \"text-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"View Repo!\")));\n};\n\nexport default LoginRes;","map":{"version":3,"sources":["/Users/quangnguyen/Desktop/Projects/Chazzy/client/src/components/LoginRes.js"],"names":["React","useState","useEffect","axios","navigate","Row","Col","Modal","Button","LoginRes","login","setLogin","username","password","register","setRegister","firstName","lastName","confirmPassword","errors","setErrors","showErrors","setShowErrors","handleClose","handleShow","get","withCredentials","then","res","data","loggedInUser","catch","err","console","log","handleLogin","event","preventDefault","post","message","msg","undefined","length","handleRegister","messages","Object","values","map","val","push","name","loginFieldOnChange","target","value","registerFieldOnChange","idx"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,KAAnB,EAA0BC,MAA1B,QAAwC,iBAAxC;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACnB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC;AAAEW,IAAAA,QAAQ,EAAE,EAAZ;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAAD,CAAlC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC;AAAEe,IAAAA,SAAS,EAAE,EAAb;AAAiBC,IAAAA,QAAQ,EAAE,EAA3B;AAA+BL,IAAAA,QAAQ,EAAE,EAAzC;AAA6CC,IAAAA,QAAQ,EAAE,EAAvD;AAA2DK,IAAAA,eAAe,EAAE;AAA5E,GAAD,CAAxC,CAFmB,CAGnB;;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBnB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACoB,UAAD,EAAaC,aAAb,IAA8BrB,QAAQ,CAAC,KAAD,CAA5C;;AACA,QAAMsB,WAAW,GAAG,MAAMD,aAAa,CAAC,KAAD,CAAvC;;AACA,QAAME,UAAU,GAAG,MAAMF,aAAa,CAAC,IAAD,CAAtC;;AAEApB,EAAAA,SAAS,CAAC,MAAM;AACZ;AACAC,IAAAA,KAAK,CAACsB,GAAN,CAAU,iCAAV,EAA6C;AAAEC,MAAAA,eAAe,EAAE;AAAnB,KAA7C,EACKC,IADL,CACUC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACC,IAAJ,CAASC,YAAT,KAA0B,IAA9B,EAAoC;AAChC1B,QAAAA,QAAQ,CAAC,GAAD,CAAR;AACH;AACJ,KALL,EAMK2B,KANL,CAMWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANlB;AAOH,GATQ,EASN,EATM,CAAT;;AAWA,QAAMG,WAAW,GAAGC,KAAK,IAAI;AACzBA,IAAAA,KAAK,CAACC,cAAN;AACAlC,IAAAA,KAAK,CAACmC,IAAN,CAAW,uCAAX,EAAoD5B,KAApD,EAA2D;AAAEgB,MAAAA,eAAe,EAAE;AAAnB,KAA3D,EACKK,KADL,CACWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CADlB,EAEKL,IAFL,CAEUC,GAAG,IAAI;AACT,YAAMW,OAAO,GAAGX,GAAG,CAACC,IAAJ,CAASW,GAAzB;;AACA,UAAID,OAAO,KAAKE,SAAZ,IAAyBF,OAAO,CAACG,MAAR,GAAiB,CAA9C,EAAiD;AAC7C,YAAIH,OAAO,KAAK,SAAhB,EAA2B;AACvBnC,UAAAA,QAAQ,CAAC,YAAD,CAAR;AACH,SAFD,MAEO;AACHgB,UAAAA,SAAS,CAAC,CAACmB,OAAD,CAAD,CAAT;AACAf,UAAAA,UAAU;AACb;AACJ,OAPD,MAOO;AACHJ,QAAAA,SAAS,CAAC,CAAC,kDAAD,CAAD,CAAT;AACAI,QAAAA,UAAU;AACb;AACJ,KAfL;AAgBH,GAlBD;;AAoBA,QAAMmB,cAAc,GAAGP,KAAK,IAAI;AAC5BA,IAAAA,KAAK,CAACC,cAAN;AACAlC,IAAAA,KAAK,CAACmC,IAAN,CAAW,0CAAX,EAAuDxB,QAAvD,EAAiE;AAAEY,MAAAA,eAAe,EAAE;AAAnB,KAAjE,EACKK,KADL,CACWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CADlB,EAEKL,IAFL,CAEUC,GAAG,IAAI;AACT,UAAI,SAASA,GAAG,CAACC,IAAjB,EAAuB;AACnB,YAAID,GAAG,CAACC,IAAJ,CAAS,KAAT,MAAoB,SAAxB,EAAmC;AAC/BzB,UAAAA,QAAQ,CAAC,YAAD,CAAR;AACH;AACJ,OAJD,MAIO;AACH,YAAIwB,GAAG,CAACC,IAAJ,CAASV,MAAb,EAAqB;AACjB,cAAIyB,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAclB,GAAG,CAACC,IAAJ,CAASV,MAAvB,EAA+B4B,GAA/B,CAAmCC,GAAG,IAAIA,GAAG,CAACT,OAA9C,CAAf;AACAK,UAAAA,QAAQ,CAACK,IAAT,CAAcrB,GAAG,CAACC,IAAJ,CAASqB,IAAvB;AACA9B,UAAAA,SAAS,CAACwB,QAAD,CAAT;AACApB,UAAAA,UAAU;AACb;AACJ;AACJ,KAfL;AAgBH,GAlBD,CAxCmB,CA4DnB;AACA;AACA;AACA;AACA;AACA;;;AAEA,QAAM2B,kBAAkB,GAAGf,KAAK,IAAIzB,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAY,KAAC0B,KAAK,CAACgB,MAAN,CAAaF,IAAd,GAAqBd,KAAK,CAACgB,MAAN,CAAaC;AAA9C,GAAD,CAA5C;;AACA,QAAMC,qBAAqB,GAAGlB,KAAK,IAAIrB,WAAW,CAAC,EAAE,GAAGD,QAAL;AAAe,KAACsB,KAAK,CAACgB,MAAN,CAAaF,IAAd,GAAqBd,KAAK,CAACgB,MAAN,CAAaC;AAAjD,GAAD,CAAlD;;AAEA,SACI,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,0DAAf;AAA0E,IAAA,EAAE,EAAE,CAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,gCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,EAEI;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ,EAGI;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,QAAQ,EAAElB,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,QAAQ,EAAEgB,kBAAjB;AAAqC,IAAA,SAAS,EAAC,oCAA/C;AAAoF,IAAA,IAAI,EAAC,UAAzF;AAAoG,IAAA,WAAW,EAAC,UAAhH;AAA2H,IAAA,IAAI,EAAC,MAAhI;AAAuI,IAAA,QAAQ,MAA/I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAO,IAAA,QAAQ,EAAEA,kBAAjB;AAAqC,IAAA,SAAS,EAAC,yCAA/C;AAAyF,IAAA,IAAI,EAAC,UAA9F;AAAyG,IAAA,WAAW,EAAC,UAArH;AAAgI,IAAA,IAAI,EAAC,UAArI;AAAgJ,IAAA,QAAQ,MAAxJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,0CACI;AAAQ,IAAA,SAAS,EAAC,wCAAlB;AAA2D,IAAA,IAAI,EAAC,QAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,EAEI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAE9B,UAAb;AAAyB,IAAA,MAAM,EAAEE,WAAjC;AAA8C,IAAA,SAAS,EAAC,WAAxD;AAAoE,IAAA,QAAQ,MAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAA0B,IAAA,SAAS,EAAC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD,CAAO,KAAP;AAAa,IAAA,SAAS,EAAC,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADJ,CADJ,EAII,oBAAC,KAAD,CAAO,IAAP;AAAY,IAAA,SAAS,EAAC,aAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,yBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyCJ,MAAM,CAACuB,MAAP,GAAgB,CAAhB,GAAoBvB,MAAM,CAAC4B,GAAP,CAAW,CAACf,GAAD,EAAMuB,GAAN,KAAc;AAAI,IAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiBvB,GAAjB,CAAzB,CAApB,GAA2E,yCAApH,CADJ,CAJJ,EAOI,oBAAC,KAAD,CAAO,MAAP;AAAc,IAAA,SAAS,EAAC,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,OAAhB;AAAwB,IAAA,OAAO,EAAET,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CAPJ,CAFJ,CAHJ,CAHJ,CADJ,CADJ,EAyBI,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,4DAAf;AAA4E,IAAA,EAAE,EAAE,CAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAEI;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAFJ,EAGI;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,QAAQ,EAAEoB,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUI,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,QAAQ,EAAEW,qBAAjB;AAAwC,IAAA,SAAS,EAAC,wCAAlD;AAA2F,IAAA,IAAI,EAAC,WAAhG;AAA4G,IAAA,WAAW,EAAC,YAAxH;AAAqI,IAAA,IAAI,EAAC,MAA1I;AAAiJ,IAAA,QAAQ,MAAzJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAII,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAO,IAAA,QAAQ,EAAEA,qBAAjB;AAAwC,IAAA,SAAS,EAAC,wCAAlD;AAA2F,IAAA,IAAI,EAAC,UAAhG;AAA2G,IAAA,WAAW,EAAC,WAAvH;AAAmI,IAAA,IAAI,EAAC,MAAxI;AAA+I,IAAA,QAAQ,MAAvJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,CAVJ,EAkBI;AAAO,IAAA,QAAQ,EAAEA,qBAAjB;AAAwC,IAAA,SAAS,EAAC,yCAAlD;AAA4F,IAAA,IAAI,EAAC,UAAjG;AAA4G,IAAA,WAAW,EAAC,UAAxH;AAAmI,IAAA,IAAI,EAAC,MAAxI;AAA+I,IAAA,QAAQ,MAAvJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBJ,EAmBI;AAAO,IAAA,QAAQ,EAAEA,qBAAjB;AAAwC,IAAA,SAAS,EAAC,yCAAlD;AAA4F,IAAA,IAAI,EAAC,UAAjG;AAA4G,IAAA,WAAW,EAAC,UAAxH;AAAmI,IAAA,IAAI,EAAC,UAAxI;AAAmJ,IAAA,QAAQ,MAA3J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBJ,EAoBI;AAAO,IAAA,QAAQ,EAAEA,qBAAjB;AAAwC,IAAA,SAAS,EAAC,yCAAlD;AAA4F,IAAA,IAAI,EAAC,iBAAjG;AAAmH,IAAA,WAAW,EAAC,kBAA/H;AAAkJ,IAAA,IAAI,EAAC,UAAvJ;AAAkK,IAAA,QAAQ,MAA1K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBJ,EAsBI,0CACI;AAAQ,IAAA,SAAS,EAAC,kCAAlB;AAAqD,IAAA,IAAI,EAAC,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,EAEI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAEjC,UAAb;AAAyB,IAAA,MAAM,EAAEE,WAAjC;AAA8C,IAAA,SAAS,EAAC,WAAxD;AAAoE,IAAA,QAAQ,MAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAA0B,IAAA,SAAS,EAAC,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD,CAAO,KAAP;AAAa,IAAA,SAAS,EAAC,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADJ,CADJ,EAII,oBAAC,KAAD,CAAO,IAAP;AAAY,IAAA,SAAS,EAAC,aAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,yBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyCJ,MAAM,CAAC4B,GAAP,CAAW,CAACf,GAAD,EAAMuB,GAAN,KAAc;AAAI,IAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiBvB,GAAjB,CAAzB,CAAzC,CADJ,CAJJ,EAOI,oBAAC,KAAD,CAAO,MAAP;AAAc,IAAA,SAAS,EAAC,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,OAAhB;AAAwB,IAAA,OAAO,EAAET,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CAPJ,CAFJ,CAtBJ,CAHJ,CADJ,CAzBJ,EAoEI;AAAG,IAAA,SAAS,EAAC,oCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAA4E;AAAG,IAAA,IAAI,EAAC,GAAR;AAAY,IAAA,SAAS,EAAC,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA5E,CApEJ,CADJ;AAwEH,CA9ID;;AAgJA,eAAed,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { navigate } from '@reach/router';\nimport { Row, Col, Modal, Button } from 'react-bootstrap';\n\nconst LoginRes = () => {\n    const [login, setLogin] = useState({ username: '', password: '' });\n    const [register, setRegister] = useState({ firstName: '', lastName: '', username: '', password: '', confirmPassword: '' });\n    // const [profileImage, setProfileImage] = useState(null);\n    const [errors, setErrors] = useState([]);\n    const [showErrors, setShowErrors] = useState(false);\n    const handleClose = () => setShowErrors(false);\n    const handleShow = () => setShowErrors(true);\n\n    useEffect(() => {\n        // Check if already logged in.\n        axios.get('http://localhost:8000/api/users', { withCredentials: true })\n            .then(res => {\n                if (res.data.loggedInUser !== null) {\n                    navigate('/');\n                }\n            })\n            .catch(err => console.log(err));\n    }, []);\n\n    const handleLogin = event => {\n        event.preventDefault();\n        axios.post('http://localhost:8000/api/users/login', login, { withCredentials: true })\n            .catch(err => console.log(err))\n            .then(res => {\n                const message = res.data.msg;\n                if (message !== undefined && message.length > 0) {\n                    if (message === 'success') {\n                        navigate('/dashboard');\n                    } else {\n                        setErrors([message]);\n                        handleShow();\n                    }\n                } else {\n                    setErrors(['Oops! Something went wrong. Please try again! :)']);\n                    handleShow();\n                }\n            })\n    }\n\n    const handleRegister = event => {\n        event.preventDefault();\n        axios.post('http://localhost:8000/api/users/register', register, { withCredentials: true })\n            .catch(err => console.log(err))\n            .then(res => {\n                if ('msg' in res.data) {\n                    if (res.data['msg'] === 'success') {\n                        navigate('/dashboard');\n                    }\n                } else {\n                    if (res.data.errors) {\n                        let messages = Object.values(res.data.errors).map(val => val.message);\n                        messages.push(res.data.name);\n                        setErrors(messages);\n                        handleShow();\n                    }\n                }\n            })\n    }\n\n    // const profileImageOnSelect = event => {\n    //     const file = event.target.files[0];\n    //     if (file !== null) {\n    //         setProfileImage(file);\n    //     }\n    // }\n\n    const loginFieldOnChange = event => setLogin({ ...login, [event.target.name]: event.target.value });\n    const registerFieldOnChange = event => setRegister({ ...register, [event.target.name]: event.target.value });\n\n    return (\n        <Row className=\"m-0 p-0\">\n            <Col className=\"p-5 heightFull align-items-center tracking-in-expand-fwd\" md={4}>\n                <div className=\"w-75 mb-5\">\n                    <h1 className=\"font-weight-bold display-3 m-0\">Chazzy.</h1>\n                    <p className=\"text-secondary\">A timed messaging app.</p>\n                    <form className=\"my-5\" onSubmit={handleLogin}>\n                        <input onChange={loginFieldOnChange} className=\"form-control bg-light p-4 border-0\" name=\"username\" placeholder=\"Username\" type=\"text\" required />\n                        <input onChange={loginFieldOnChange} className=\"form-control mt-2 bg-light p-4 border-0\" name=\"password\" placeholder=\"Password\" type=\"password\" required />\n                        <>\n                            <button className=\"btn btn-dark btn-action mt-5 px-4 py-2\" type=\"submit\">Sign In</button>\n                            <Modal show={showErrors} onHide={handleClose} className=\"no-border\" centered>\n                                <Modal.Header closeButton className=\"no-border\">\n                                    <Modal.Title className=\"font-weight-bold\">Ooops! Something went wrong. :(</Modal.Title>\n                                </Modal.Header>\n                                <Modal.Body className=\"border-none\">\n                                    <ul className=\"list-inline text-danger\">{errors.length > 0 ? errors.map((err, idx) => <li key={idx}>- {err}</li>) : <></>}</ul>\n                                </Modal.Body>\n                                <Modal.Footer className=\"no-border\">\n                                    <Button variant=\"light\" onClick={handleClose}>Got It!</Button>\n                                </Modal.Footer>\n                            </Modal>\n                        </>\n                    </form>\n                </div>\n            </Col>\n            <Col className=\"p-5 m-0 heightFull align-items-center tracking-in-contract\" md={8}>\n                <div className=\"w-75 mb-5 text-center\">\n                    <h1 className=\"font-weight-bold m-0\">Register</h1>\n                    <p className=\"text-secondary\">Don't have an account? Sign Up.</p>\n                    <form className=\"my-5\" onSubmit={handleRegister}>\n                        {/* <ul className=\"list-inline text-secondary my-3\">\n                            <li className=\"list-inline-item align-middle mx-3\">\n                                <img width=\"100\" height=\"100\" className=\"rounded-circle\" accept=\"image/*\" src={profileImage ? URL.createObjectURL(profileImage) : ''} alt=\"\" />\n                            </li>\n                            <li className=\"list-inline-item align-middle mx-3\">\n                                <label>Select your profile image!</label><br />\n                                <input onChange={profileImageOnSelect} className=\"border-none\" type=\"file\" required />\n                            </li>\n                        </ul> */}\n                        <Row className=\"m-0 p-0\">\n                            <Col className=\"m-0 p-0 mr-1\">\n                                <input onChange={registerFieldOnChange} className=\"form-control bg-light m-0 p-4 border-0\" name=\"firstName\" placeholder=\"First Name\" type=\"text\" required />\n                            </Col>\n                            <Col className=\"m-0 p-0 ml-1\">\n                                <input onChange={registerFieldOnChange} className=\"form-control bg-light m-0 p-4 border-0\" name=\"lastName\" placeholder=\"Last Name\" type=\"text\" required />\n                            </Col>\n                        </Row>\n                        <input onChange={registerFieldOnChange} className=\"form-control bg-light my-2 p-4 border-0\" name=\"username\" placeholder=\"Username\" type=\"text\" required />\n                        <input onChange={registerFieldOnChange} className=\"form-control bg-light mt-2 p-4 border-0\" name=\"password\" placeholder=\"Password\" type=\"password\" required />\n                        <input onChange={registerFieldOnChange} className=\"form-control bg-light mt-2 p-4 border-0\" name=\"confirmPassword\" placeholder=\"Confirm Password\" type=\"password\" required />\n\n                        <>\n                            <button className=\"btn btn-secondary mt-5 px-4 py-2\" type=\"submit\">Sign Up</button>\n                            <Modal show={showErrors} onHide={handleClose} className=\"no-border\" centered>\n                                <Modal.Header closeButton className=\"no-border\">\n                                    <Modal.Title className=\"font-weight-bold\">Ooops! Something went wrong. :(</Modal.Title>\n                                </Modal.Header>\n                                <Modal.Body className=\"border-none\">\n                                    <ul className=\"list-inline text-danger\">{errors.map((err, idx) => <li key={idx}>- {err}</li>)}</ul>\n                                </Modal.Body>\n                                <Modal.Footer className=\"no-border\">\n                                    <Button variant=\"light\" onClick={handleClose}>Got It!</Button>\n                                </Modal.Footer>\n                            </Modal>\n                        </>\n                    </form>\n                </div>\n            </Col>\n            <p className=\"copyright-label m-0 text-secondary\">&#9400;QuangNguyen 2020 - <a href=\"#\" className=\"text-secondary\">View Repo!</a></p>\n        </Row >\n    );\n}\n\nexport default LoginRes;"]},"metadata":{},"sourceType":"module"}